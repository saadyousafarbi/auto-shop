{% extends "base.html" %}

{% block content %}

{% block javascript %}
  <script>
    $("#id_username").change(function () {
      var username = $(this).val();

      $.ajax({
        url: '/ajax/validate_username/',
        data: {
          'username': username
        },
        dataType: 'json',
        success: function (data) {
          if (data.is_taken) {
            alert("A user with this username already exists.");
          }
        }
      });
    });
  </script>
{% endblock %}

{% if messages %}
<div class="span12">
    {% for message in messages %}
        <div class="alert alert-{{ message.tags }}">
            {{ message|safe }}
        </div>
    {% endfor %}
</div>
{% endif %}

    <form method="post">
        {% csrf_token %}
            <table>
                {{form.as_table}}
            </table>
        <button type="submit" value="Submit" class="submit"> Register</button>
    </form>
{% endblock content %}
